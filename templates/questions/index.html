{% extends "base.html" %}

{% block title %}ì§ˆë¬¸ - ì»¤í”Œ ì•±{% endblock %}

{% block content %}
<div class="questions-container">
    <div class="questions-header">
        <h1>â“ ì§ˆë¬¸</h1>
        <p>ì„œë¡œë¥¼ ë” ê¹Šì´ ì•Œì•„ê°€ëŠ” íŠ¹ë³„í•œ ì‹œê°„ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
    </div>

    <div class="questions-content">
        <!-- ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ ì¹´ë“œ -->
        <div class="featured-card">
            <div class="card-header">
                <h2>ğŸŒŸ ì˜¤ëŠ˜ì˜ ì§ˆë¬¸</h2>
                <p>ë§¤ì¼ ìƒˆë¡œìš´ ì§ˆë¬¸ìœ¼ë¡œ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”</p>
            </div>
            <div class="card-content">
                <div class="daily-question-preview" id="daily-question-preview">
                    <div class="loading">ë¡œë”© ì¤‘...</div>
                </div>
                <div class="card-actions">
                    <a href="{{ url_for('questions.daily') }}" class="btn btn-primary btn-lg">ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ ë‹µí•˜ê¸°</a>
                </div>
            </div>
        </div>

        <!-- ê¸°ëŠ¥ ë©”ë‰´ -->
        <div class="questions-menu">
            <div class="menu-item">
                <div class="menu-icon">ğŸ“š</div>
                <div class="menu-content">
                    <h3>ì§ˆë¬¸ ë‘˜ëŸ¬ë³´ê¸°</h3>
                    <p>ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ì˜ ì§ˆë¬¸ë“¤ì„ ì‚´í´ë³´ì„¸ìš”</p>
                    <a href="{{ url_for('questions.browse') }}" class="btn btn-secondary">ë‘˜ëŸ¬ë³´ê¸°</a>
                </div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">ğŸ“–</div>
                <div class="menu-content">
                    <h3>ë‹µë³€ íˆìŠ¤í† ë¦¬</h3>
                    <p>ì§€ê¸ˆê¹Œì§€ ë‚˜ëˆˆ ëŒ€í™”ë“¤ì„ ë‹¤ì‹œ ì½ì–´ë³´ì„¸ìš”</p>
                    <a href="{{ url_for('questions.history') }}" class="btn btn-secondary">íˆìŠ¤í† ë¦¬ ë³´ê¸°</a>
                </div>
            </div>
        </div>

        <!-- ì¹´í…Œê³ ë¦¬ ì†Œê°œ -->
        <div class="categories-section">
            <h2>ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬</h2>
            <div class="categories-grid">
                {% for category_id, category_info in categories.items() %}
                <div class="category-card">
                    <div class="category-emoji">{{ category_info.emoji }}</div>
                    <h3>{{ category_info.name }}</h3>
                    <p>{{ category_info.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- í†µê³„ ì •ë³´ -->
        <div class="stats-section">
            <h2>ì§ˆë¬¸ í†µê³„</h2>
            <div class="stats-grid" id="stats-grid">
                <div class="loading">í†µê³„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* ì§ˆë¬¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
.questions-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--spacing-lg);
}

.questions-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
}

.questions-header h1 {
    font-size: var(--text-3xl);
    font-weight: 700;
    color: var(--charcoal);
    margin-bottom: var(--spacing-sm);
}

.questions-header p {
    font-size: var(--text-lg);
    color: var(--dark-gray);
}

.questions-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2xl);
}

/* ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ ì¹´ë“œ */
.featured-card {
    background: linear-gradient(135deg, var(--primary-pink), var(--primary-blue));
    border-radius: var(--radius-xl);
    padding: var(--spacing-2xl);
    text-align: center;
    color: var(--charcoal);
    box-shadow: var(--shadow-lg);
}

.featured-card .card-header h2 {
    font-size: var(--text-2xl);
    margin-bottom: var(--spacing-sm);
}

.featured-card .card-header p {
    font-size: var(--text-lg);
    margin-bottom: var(--spacing-xl);
    opacity: 0.8;
}

.daily-question-preview {
    background: rgba(255, 255, 255, 0.9);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    margin-bottom: var(--spacing-xl);
    min-height: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.question-text {
    font-size: var(--text-lg);
    font-weight: 500;
    line-height: 1.6;
    color: var(--charcoal);
}

.question-meta {
    display: flex;
    justify-content: center;
    gap: var(--spacing-lg);
    margin-top: var(--spacing-md);
    font-size: var(--text-sm);
    opacity: 0.7;
}

.question-category,
.question-difficulty {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

/* ê¸°ëŠ¥ ë©”ë‰´ */
.questions-menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-xl);
}

.menu-item {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-2xl);
    box-shadow: var(--shadow-md);
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.menu-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.menu-icon {
    font-size: 3rem;
    flex-shrink: 0;
}

.menu-content h3 {
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--charcoal);
    margin-bottom: var(--spacing-sm);
}

.menu-content p {
    color: var(--dark-gray);
    margin-bottom: var(--spacing-lg);
    line-height: 1.6;
}

/* ì¹´í…Œê³ ë¦¬ ì„¹ì…˜ */
.categories-section {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-2xl);
    box-shadow: var(--shadow-md);
}

.categories-section h2 {
    text-align: center;
    font-size: var(--text-2xl);
    font-weight: 600;
    color: var(--charcoal);
    margin-bottom: var(--spacing-2xl);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-lg);
}

.category-card {
    background: var(--light-gray);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    text-align: center;
    transition: transform 0.3s ease;
}

.category-card:hover {
    transform: translateY(-2px);
}

.category-emoji {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-md);
}

.category-card h3 {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--charcoal);
    margin-bottom: var(--spacing-sm);
}

.category-card p {
    color: var(--dark-gray);
    font-size: var(--text-sm);
    line-height: 1.5;
}

/* í†µê³„ ì„¹ì…˜ */
.stats-section {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--spacing-2xl);
    box-shadow: var(--shadow-md);
}

.stats-section h2 {
    text-align: center;
    font-size: var(--text-2xl);
    font-weight: 600;
    color: var(--charcoal);
    margin-bottom: var(--spacing-2xl);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-lg);
}

.stat-item {
    background: var(--light-gray);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    text-align: center;
}

.stat-number {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--accent-coral);
    margin-bottom: var(--spacing-xs);
}

.stat-label {
    font-size: var(--text-sm);
    color: var(--dark-gray);
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .questions-container {
        padding: 0 var(--spacing-md);
    }
    
    .questions-header h1 {
        font-size: var(--text-2xl);
    }
    
    .questions-header p {
        font-size: var(--text-base);
    }
    
    .featured-card {
        padding: var(--spacing-xl);
    }
    
    .featured-card .card-header h2 {
        font-size: var(--text-xl);
    }
    
    .featured-card .card-header p {
        font-size: var(--text-base);
    }
    
    .menu-item {
        flex-direction: column;
        text-align: center;
        padding: var(--spacing-xl);
    }
    
    .menu-icon {
        font-size: 2.5rem;
    }
    
    .categories-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    loadDailyQuestionPreview();
    loadStats();
});

async function loadDailyQuestionPreview() {
    try {
        const response = await fetch('/questions/api/daily-question');
        const data = await response.json();
        
        const preview = document.getElementById('daily-question-preview');
        
        if (data.success) {
            const question = data.question;
            const categoryInfo = question.category_info;
            const difficultyInfo = question.difficulty_info;
            
            preview.innerHTML = `
                <div class="question-text">${question.text}</div>
                <div class="question-meta">
                    <div class="question-category">
                        <span>${categoryInfo.emoji || 'ğŸ“'}</span>
                        <span>${categoryInfo.name || question.category}</span>
                    </div>
                    <div class="question-difficulty">
                        <span>â­</span>
                        <span>${difficultyInfo.name || question.difficulty}</span>
                    </div>
                </div>
            `;
        } else {
            preview.innerHTML = '<div class="question-text">ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
        }
        
    } catch (error) {
        console.error('ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ ì‹¤íŒ¨:', error);
        document.getElementById('daily-question-preview').innerHTML = 
            '<div class="question-text">ì§ˆë¬¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
    }
}

async function loadStats() {
    // ì„ì‹œ í†µê³„ ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨)
    const statsGrid = document.getElementById('stats-grid');
    
    const stats = [
        { number: '{{ categories|length }}', label: 'ì¹´í…Œê³ ë¦¬' },
        { number: '40+', label: 'ì´ ì§ˆë¬¸ ìˆ˜' },
        { number: '3', label: 'ë‚œì´ë„ ë‹¨ê³„' },
        { number: 'ë§¤ì¼', label: 'ìƒˆë¡œìš´ ì§ˆë¬¸' }
    ];
    
    statsGrid.innerHTML = stats.map(stat => `
        <div class="stat-item">
            <div class="stat-number">${stat.number}</div>
            <div class="stat-label">${stat.label}</div>
        </div>
    `).join('');
}
</script>
{% endblock %}